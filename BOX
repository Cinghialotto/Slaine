		; PLOT COLOUR RAM FOR BOXESPLOTCO	LDA #255	; SMC	NOPPFADEIT	LDA LASTC	;A LIGHTER COLOUR	STA TMP		;COLOUR STORE	STX TEMP	;TEMP STORE		LDX LASTB	;PREVIOUS BOX	LDA BOXSIZE,X	;OR NEW BOX	LSR A	LSR A	LSR A	LSR A		;X SIZE	SEC	SBC #1	STA YTEMP	LDA BOXSIZE,X	;Y SIZE	AND #%00001111	STA XTEMP	LDA BOXOFF,X 	;Y OFF	AND #%00001111	CLC	ADC #11	TAY	LDA BOXOFF,X	;X OFF	LSR A	LSR A	LSR A	LSR A	CLC	ADC #20		; ON SCREEN	ADC COLRAML,Y	STA MIKE2+0	;COLOUR LOW	LDA COLRAMH,Y	ADC #0	STA MIKE2+1	;COLOUR HIGHPLTC	LDX XTEMPCHARLL	LDY YTEMPHOWF	SEI	LDA #0	STA R6510	LDA TMP	STA (MIKE2),Y	LDA #%00110101	STA R6510	CLI	DEY	BPL HOWF	LDA MIKE2	CLC	ADC #40	STA MIKE2	BCC FRAN	INC MIKE2+1FRAN	DEX	BNE CHARLL	LDX TEMP	RTSNORM	LDA #1*16	NOPPATTK	LDA #2*16	STA TMP	LDA #<(COL+&A2)	STA MIKE2+1	LDA #>(COL+&A2)	STA MIKE2+0	LDA #13	STA YTEMP	LDA #17	STA XTEMP	JMP PLTCFACE	LDA #<&EE60	STA MIKE2+1	LDA #>&EE60	STA MIKE2+0	LDA #<SLFACE	STA MIKE1+1	LDA #>SLFACE	STA MIKE1+0	LDX #14		; XSIZE		LDA #17*8	; ADDAMOUNT	STA ADM+1	LDY #(17*8)-1	; YSIZE	STY HEO+1	JSR HEO	LDA #10*16	; LT RED	STA TMP	LDX #14	; Y AMOUNT	LDA #16	STA YTEMP	LDA #<(COL+&1CC)	STA MIKE2+1	LDA #>(COL+&1CC)	STA MIKE2+0       JSR CHARLL	LDX #0	; (C) SYMBOL	JMP FIRSTWFBOX	STX LASTB	; FAST WINDOW	JSR BOXME	; BOX PLOT	LDA SH	STA POLO2+1	LDA SL	STA POLO1+1	JSR SMALLT	LDA #>TEXTBUF	STA MIKE1	LDA #<TEXTBUF	STA MIKE1+1	LDA BOXSIZE,X	AND #15	TAX	LDA #55	;((LL/2)+1)*8)-1	STA HEO+1	LDA #((LL/2)+1)*8	STA ADM+1POLO1	LDA #255		STA MIKE2POLO2	LDA #255	STA MIKE2+1HEO	LDY #(17*8)-1PLL	LDA (MIKE1),Y			STA (MIKE2),Y	DEY	CPY #255	BNE PLL	LDA MIKE1+0	CLCADM	ADC #17*8	STA MIKE1+0	BCC DISK	INC MIKE1+1DISK	LDA MIKE2+0	CLC	ADC #>320	STA MIKE2+0	LDA MIKE2+1	ADC #<320	STA MIKE2+1	DEX	BNE HEO	RTS	;X=BOX NUMBERWINDOW	JSR FADEIT	; COLOUR FADEFIRSTW	STX LASTB	; LAST BOX	LDY #01*16	; WHITE	LDA #15*16	; LIGHT GRAY	STA LASTC	LDA BOXML,X	; GET FROM	STA BLL		; WHERE	LDA BOXMH,X	; BOX IS IN	STA BLH		; MEMORY	TXA	CMP #51	;T		; SMALL TEXT	BCC GRAFIX	; IF GRAFIC	JSR SMALLT	; SMALL TEXT	LDY #14*16	; BLUE	LDA #6*16	; LT BLUE TEXT	STA LASTC	LDA #>TEXTBUF	; GET FROM	STA BLL		; SMALL TEXT	LDA #<TEXTBUF	; BUFFER	STA BLHGRAFIX STY PLOTCO+1	JSR BOXME	; XY MEM	LDA BOXSIZE,X	; X SIZE*8	AND #%11110000	LSR A	STA AMOUNT	LDA BOXSIZE,X	; X SIZE*4	AND #%11110000	LSR A	LSR A	STA SX2	SEC	SBC #1	STA SX	STA XAM	LDA BOXSIZE,X	; Y SIZE*4	AND #%00001111	ASL A	ASL A	STA SY2	SEC	SBC #1	STA SY	STA YAM	LDA #2	STA XS	STA YS	LDA SX2		;BOXXSIZE,X	CMP SY2		;BOXYSIZE,X	BCC PLENT	INC XAMPLENT	LDA SYNCSMOO	CMP SYNC	BEQ SMOO	LDX SX	LDY SY	JSR PLX	LDX SX	LDY SY2	JSR PLX	LDX SX	LDY SY	JSR PLY	LDX SX2	LDY SY	JSR PLY	LDA XAM	BEQ AST	DEC XAM	DEC SX	INC SX2	INC XS	INC XSAST	LDA YAM	BEQ ATE	DEC YAM	DEC SY	INC SY2	INC YS	INC YS	JMP PLENTATE	LDA XAM	BNE PLENT	JMP PLOTCO	; COLOUR MEMPLX	JSR SCRXY	LDA XS	STA LSOURCE	LDA (SCN),Y	AND IPIX,X	STA TEMP	LDA (BOXM),Y	AND PIX,X	ORA TEMP	STA (SCN),Y	INX	CPX #8	BNE WE	LDX #0	LDA SCN	CLC	ADC #8	STA SCN	BCC WEL	INC SCN+1WEL	LDA BOXM	CLC	ADC #8	STA BOXM	BCC WE	INC BOXM+1WE	DEC L	BNE SOURCE	RTSBOXME	LDA BOXOFF,X	; Y OFF	AND #%00001111	TAY	LDA BOXOFF,X	; X OFF*8	AND #%11110000	LSR A	ADC ICONML,Y	STA SL	LDA ICONMH,Y	ADC #0	STA SH	RTSPLY	JSR SCRXY	LDA YS	STA LSOURCE2 LDA (SCN),Y	AND IPIX,X	STA TEMP	LDA (BOXM),Y	AND PIX,X	ORA TEMP	STA (SCN),Y	INY	CPY #8	BNE SKIP	LDY #0	LDA BOXM	CLC	ADC AMOUNT	STA BOXM	BCC FIN	INC BOXM+1FIN	LDA SCN	CLC	ADC #&40	STA SCN	LDA SCN+1	ADC #1	STA SCN+1SKIP	DEC L	BNE SOURCE2	RTSSCRXY	LDA #0	STA SCN+1	STY TEMP	TXA	AND #&F8	CLC	ADC SL	STA SCN	LDA SH	ADC #0	STA SCN+1	TYA	LSR A		;Y DIV 8	LSR A	LSR A	TAY	LDA M320L,Y	;Y*320	CLC	ADC SCN	STA SCN	LDA M320H,Y	ADC SCN+1	STA SCN+1	TXA	AND #&F8	CLC	ADC BLL	STA BOXM	LDA BLH	ADC #0	STA BOXM+1FINDMY	CPY #0	BEQ NOYAA	LDA BOXM	CLC	ADC AMOUNT	STA BOXM	BCC CARR	INC BOXM+1CARR	DEY	BNE FINDMYNOYAA	TXA	AND #7	TAX	LDA TEMP	AND #7	TAY	RTSPIX	DB %10000000,%01000000	DB %00100000,%00010000	DB %00001000,%00000100	DB %00000010,%00000001IPIX	DB %01111111,%10111111	DB %11011111,%11101111	DB %11110111,%11111011	DB %11111101,%11111110M320L	DB &00,&40,&80,&C0	DB &00,&40,&80,&C0	DB &00,&40,&80,&C0	DB &00,&40M320H	DB &00,&01,&02,&03	DB &05,&06,&07,&08	DB &0A,&0B,&0C,&0D	DB &0F,&10ICONML	DB &60,&A0,&E0,&20	DB &60,&A0,&E0,&20	DB &60,&A0,&E0,&20	DB &60,&A0ICONMH	DB &EE,&EF,&F0,&F2	DB &F3,&F4,&F5,&F7	DB &F8,&F9,&FA,&FC	DB &FD,&FE   	;BOX ROUTINES SM TEXT ETX	;SMALL TEXT ROUTINESMALLT	LDY #0	TYA	;WIPE CLEAN FIRSTCLEA	STA TEXTBUF+&000,Y	STA TEXTBUF+&100,Y	STA TEXTBUF+&200,Y	INY	BNE CLEA	LDA BOXML,X	; WHERE TEXT	STA STEXT	; IS AT	LDA BOXMH,X	STA STEXT+1	JSR PLO		; PLOT SMALL BOX	LDX LASTB	LDA #((LL/2)+1)*16	ORA YSIZE	ORA BOXSIZE,X	STA BOXSIZE,X	RTS	PLO	LDA #255	STA LEFTRIGHT	LDA #<TEXTBUF	STA WSTORE+1	LDA #>TEXTBUF	STA WSTORE	JSR ABE		;TOPLINE		LDA #<TEXTBUF	STA WSTORE+1	STA WSTORET+1	LDA #>TEXTBUF+4	STA WSTORE	STA WSTORET	LDA #2		;ALLWAYS	STA YSIZE	;STARTS AT 2	LDX #0		;COUNTER	JSR FIRMES	JSR PRL	CPX #LL		;MAXX	BNE FLYAW	JMP NELFLYAW	STX TEMP	LDY #255NT	INY	LDA (STEXT),Y	CMP #255	BEQ FINO	CMP #32	BNE NT	TYA	CLC	ADC TEMP	CMP #LL+1	BCC MESDE	JSR SPA	INX	CPX #LL	BNE DENEL	JSR EN	INC YSIZE	LDX #0	LDA #255	STA LEFTRIGHT	LDA WSTORET	CLC	ADC #(LL/2*8)+8	STA WSTORET	STA WSTORE	BCC PL	INC WSTORET+1PL	LDA WSTORET+1	STA WSTORE+1	JSR FIR	JMP MESEXI	PLA	PLAFINO	CPX #0	BEQ R	JSR ST	JSR EN	JMP BPR	DEC YSIZE	LDA WSTORE	SEC	SBC #8	STA WSTORE	BCS DER	DEC WSTORE+1DER	JMP BPPRL	LDY #0	LDA (STEXT),Y	CPX #LL	BEQ SR	CMP #32	BEQ SSP	CMP #255	BEQ EXI	JSR PR	INX	INC STEXT	BNE PRL	INC STEXT+1	BNE PRLSSP	CPX #0	BEQ BO	JSR SPA	INXBO	INC STEXT	BNE SR	INC STEXT+1SR	RTSST	JSR SPA	INX	CPX #LL	BNE ST	RTS	PR	LDY #0	STY SMEM+1	STA TEMP	AND #254	ASL A	ROL SMEM+1	ASL A	ROL SMEM+1	ADC #>(SMTEXT-(16*8))	STA SMEM	LDA SMEM+1	ADC #<(SMTEXT-(16*8))	STA SMEM+1	LDA TEMP	AND #1	SEC	SBC #1	STA TEMP	JSR TXP	JSR F1	LDA SMEM	CLC	ADC #4	STA SMEM	BCC EPR	INC SMEM+1EPR	JSR TXP	LDA SMEM	SEC	SBC #4	STA SMEM	BCS FL	DEC SMEM+1FL	JSR B1	JMP NETXP	LDY #3PLT	LDA (SMEM),Y	BIT TEMP	BPL LOWH	LSR A	LSR A	LSR A	LSR ALOWH	AND #15	BIT LEFTRIGHT	BMI JUST	ASL A	ASL A	ASL A	ASL AJUST	ORA (WSTORE),Y	STA (WSTORE),Y	DEY	BPL PLT	RTS	BLOCK	NE	LDA LEFTRIGHT	EOR #255	STA LEFTRIGHT	BMI :RET	LDA WSTORE	CLC	ADC #8	STA WSTORE	BCC :RET	INC WSTORE+1:RET	RTS	SPA	JSR PLD	JSR F1	JSR PLD	JSR B1	JMP NE	PLD	LDY #3	BIT LEFTRIGHT	BMI JO	LDA #&F0	NOPPJO	LDA #&0F	STA TEMPSPL	LDA TEMP	ORA (WSTORE),Y	STA (WSTORE),Y	DEY	BPL SPL	RTS	FIR	JSR PLS	JSR F1	JSR PLS	JMP B1	PLS	LDY #3	LDA #&50SS	STA (WSTORE),Y	DEY	BPL SS	RTS	EN	BIT LEFTRIGHT	BMI JO2	LDA #&A0	NOPPJO2	LDA #&0A	STA TEMP	JSR SLA	JSR F1	JSR SLA	JMP B1SLA	LDY #3SAL1	LDA TEMP	ORA (WSTORE),Y	STA (WSTORE),Y	DEY	BPL SAL1	RTSF1	LDA WSTORE	CLC	ADC #(LL/2*8)+4	STA WSTORE	BCC NOC	INC WSTORE+1NOC	RTSB1	LDA WSTORE	SEC	SBC #(LL/2*8)+4	STA WSTORE	BCS NOD	DEC WSTORE+1NOD	RTS	ABE	LDY #3SO	LDA DA,Y	STA (WSTORE),Y	DEY	BPL SO	LDX #(LL/2)	JMP FIX	MO	LDY #3SP	LDA DL,Y	STA (WSTORE),Y	DEY	BPL SPFIX	LDA WSTORE	CLC	ADC #8	STA WSTORE	BCC E	INC WSTORE+1E	DEX	BNE MO	LDY #3ENT	LDA DR,Y	STA (WSTORE),Y	DEY	BPL ENT	RTS		;BOTTOM BITBP	LDA WSTORE	CLC	ADC #8	STA WSTORE	BCC Z	INC WSTORE+1Z	LDY #3SQ	LDA DA2,Y	STA (WSTORE),Y	DEY	BPL SQ	LDX #(LL/2)	JMP FIWMR	LDY #3SW	LDA L2,Y	STA (WSTORE),Y	DEY	BPL SWFIW	LDA WSTORE	CLC	ADC #8	STA WSTORE	BCC TS	INC WSTORE+1TS	DEX	BNE MR	LDY #3ENR	LDA DR2,Y	STA (WSTORE),Y	DEY	BPL ENR	RTSSMTEXT	HEX "FFFDFDFDFDFFFDFF"	HEX "FFFFFFFFFFFFFFFF"	HEX "FFFFFFFFFFFFFFFF"	HEX "FFFDFDFBFFFFFFFF"	HEX "FFFFFFFFFFFFFFFF"	HEX "FFFFFFFFFFFFFFFF"	HEX "FFFFFFFFFFDFBFFF"	HEX "FFFFFFFFFFCFCFFF"	HEX "FFDDA9ADADADD8FF"	HEX "FFD9AEEDDEBE89FF"	HEX "FFB8BBB9BE8ED9FF"	HEX "FF88BE8EAEAD8DFF"	HEX "FF88AA8AA8AE8EFF"	HEX "FFFFDDDDFFDDDBFF"	HEX "FFFFFFFFFFFFFFFF"	HEX "FFFDFAFEFDFFFDFF"	HEX "FFFDFAFAF8FAFAFF"	HEX "FF98AB9B9BAB98FF"	HEX "FF98ABA9ABAB98FF"	HEX "FF8DBA9BBABABDFF"	HEX "FFA8AD8DADADA8FF"	HEX "FFEAEAE9E9EA9AFF"	HEX "FFBAB8BABABA8AFF"	HEX "FFA8AA8A8AAAA8FF"	HEX "FF88AAAA8AB9BEFF"	HEX "FF88ABA89EAEA8FF"	HEX "FF8ADADADADAD8FF"	HEX "FFAAAAAAAA88DAFF"	HEX "FFAAAADADDADADFF"	HEX "FF8FEFDFDFBF8FFF"DA	DB &00,&7F,&40,&5FDL	DB &00,&FF,&00,&FFDR	DB &00,&FE,&02,&FADA2	DB &5F,&40,&7F,&00L2	DB &FF,&00,&FF,&00DR2	DB &FA,&02,&FE,&00  