LOC	EQU 1DEB	EQU 0		; ON BORDER	ORG &6600	MSW -1	EXEC MAIN	; START OF CODE	; SLANE SOURCE	; STARTED 21/05/1987	; COPYRIGHT 1987/88	; MICHAEL ARCHER	DSECT	ORG &01R6510	DS 1 	; I/O PORTSYNC	DS 1	; 1/50 SECOND COUNTERLEFT	DS 1	; 0/1 THE VALUE OFRIGHT	DS 1	; 0/1 0 OR 1 FOR ANYUP	DS 1	; 0/1 MOVEMENT FORDOWN	DS 1	; 0/1 THAT DIRECTIONFIRE	DS 1	; 0/1 IN THE JOYSTICKROOM	DS 1	; ROOM NUMBERMAPD	DS 2	; MAP DATAWARP	DS 2	; CURRENT WARP RATINGMAXW	DS 3	; MAXIMUM WARP RATINGKILL	DS 1	; TIMER FOR ENEMYYESB	DS 1	; DO WHAT ON YES SELECTEDNOB	DS 1	; DO WHAT ON NO SELECTEDAXE	DS 1	; WHAT AXE IS DOINGMONEY	DS 1	; HOW MUCH LOLLY YOU GOTOPPONT	DS 1	; WHAT THEY ARE DOINGENEMYW	DS 1	; ENEMY WAR RATING TOTALSTAKE	DS 1	; HOW MUCH FOR DRINK CONTESTDRINK	DS 1	; ARE YOU IN DRINK CONTESTDRUNK	DS 1	; 8 TO DRINKVDRUNK	DS 1	; VILLAGER DRUNK ?ELAPSE	DS 1	; SPEED FOR OPP.DRINKERINTOX	DS 1	; AMOUNT TO DRUNKENFIGHT	DS 1	; ARE YOU IN FIGHT MODEMAIN1	DS 1	; TASK COMPLETEMAIN2	DS 1MAIN3	DS 1MAIN4	DS 1MAIN5	DS 1	; NAME FLAGEATTACK	DS 1	; IF ENEMY ATTACK YOUATYPE	DS 1	; WHAT ATTACK TYPETIMER	DS 1	; SECOND'S COUNTERTIMER2	DS 1	; 255 TO 1 CONT AT 50/SecondVILOFF	DS 1	; OFFSET TO ENEMY TABLEPOSITION	DS 1	; DOWN SCROLLSLISTO	DS 1	; LIST OFFSETNTSC	DS 1	; JOYSTICKIRQTEMP	DS 3	; 0=A1=X2=YMOVEICON	DS 1	; MASTER ICON CONTROLHITUKO	DS 1	; HOW MANY HITSPOINT	DS 1	; IF POINTING HANDNEXTONE	DS 1	; TOGGLE FOR 0/1XCORD	DS 4	; HAND UKKOYCORD	DS 4	; AND 2 BLOODSFRAME	DS 1	; HAND FRAMEDEBUG	DS 3	; SPRITES ON BORDERSEED	DS 3	; FOR RANDOM NUMBERWHATY	DS 1	; CHOSEN Y POS DOWNWHATO	DS 1	; WHAT OBJECT NUMBERWHATS	DS 1	; WHAT SCROLL NUMBERWHATP	DS 1	; WHAT OBJECT*4 TABLE OFF.DOWHAT	DS 1	; WHAT TO DO WITH OBJECTXA	DS 1	; XADD TO HANDYA	DS 1	; YADD TO HANDMUSIC	DS 1	; MUSIC ON/OFFLASTB	DS 1	; LAST WINDOWLASTC	DS 1	; COLOUR TO FADE LAST WINDOW	ENEMYT	DS 8	; ENEMY DATA TEMP AREATEMPM	DS 2	; TEMPARY MEMORY FOR		; OPTION ROUTINES	; NEVER OVER WRITE THESETEXMEM	DS 2	; TTEXT BITSSAVEX	DS 1	; XTEMP SAVESCMEML	DS 8	; TEXT MEMLOSCMEMH	DS 8	; TEXT MEMHISSIZE	DS 8	; 0 TO 13 / 13 TO 0SCOUNT	DS 8	; 0 TO 7WHSCRL	DS 8	; WHAT SCROLL TO CALLWHSCRH	DS 8	; LO / HIGHSCDELY	DS 8	; WHEN ON SCREENWHDELY	DS 8	; WHAT DELAYSCOFFB	DS 8	; Y * 8 OFFWHERAY	DS 8	; WHERE EACH SCROLL ISSCDIR	DS 8	; DIRECTIONUSED	DS 8	; IF BEING USEDSPEED	DS 8	; 1 PIXEL 8 PIXELSLIST	DS 30	; VERY IMPORTANTCOMMON	DS 1	; ALLOW FOR COMMON	DEND	; ROUTINES TO SHARE		; SAME LOCATIONS	; NORMAL DEFINED MEMORYOPTNUM	DS 17	; WHAT OPTION DOWN/USEDPICKED	DS 17	; THE CHOSEN ONE	DSECT	ORG COMMON	;SMALL TEXT ROUTINEYSIZE		DS 1WSTORE		DS 2WSTORET	DS 2LEFTRIGHT	DS 2STEXT		DS 2SMEM		DS 2	DENDT	EQU 117	; START OF BOX NUMBERSTEPX	EQU 5	; MOVEMENT AMOUNT X CORDSTEPY	EQU 3	; MOVEMENT AMOUNT Y CORD	DSECT	ORG COMMON	; BRING UP WINDOW ROUTINE	; AND FADE IN ROUTINEMIKE1	DS 2MIKE2	DS 2XTEMP	DS 1YTEMP	DS 1SCN	DS 2BOXM	DS 2L	DS 1BLL	DS 1BLH	DS 1AMOUNT	DS 1XS	DS 1YS	DS 1SX	DS 1SY	DS 1SX2	DS 1SY2	DS 1XAM	DS 1YAM	DS 1SL	DS 1SH	DS 1TEMP	DS 2TMP	DS 1MESAGE DS 2	DENDLL		EQU 12	;SMTEXTSIZEBSEED		EQU &0200	;14*17TEXTBUF	EQU BSEED+(14*17); &270 MAXTST		EQU TEXTBUF+&400;SCROLL 17*8SLFACE		EQU &1000BOXST		EQU &1000+&770	;STARTBANK		EQU &C000COL		EQU &DC00VIC		EQU &D000SID		EQU &D400X0		EQU VIC+0Y0		EQU VIC+1X1		EQU VIC+2Y1		EQU VIC+3X2		EQU VIC+4Y2		EQU VIC+5X3		EQU VIC+6Y3		EQU VIC+7X4		EQU VIC+8Y4		EQU VIC+9X5		EQU VIC+10Y5		EQU VIC+11X6		EQU VIC+12Y6		EQU VIC+13X7		EQU VIC+14Y7		EQU VIC+15MSB		EQU VIC+16VICCR1		EQU VIC+17RASTER		EQU VIC+18ENABLE		EQU VIC+21VICCR2		EQU VIC+22EXPANDY	EQU VIC+23VICMCR		EQU VIC+24VICIFR		EQU VIC+25VICIMR		EQU VIC+26PRIORITY	EQU VIC+27	MULTICOL	EQU VIC+28EXPANDX	EQU VIC+29BORDER		EQU VIC+32COLOUR0	EQU VIC+33COLOUR1	EQU VIC+34COLOUR2	EQU VIC+35COLOUR3	EQU VIC+36MULTI0		EQU VIC+37MULTI1		EQU VIC+38SPC0		EQU VIC+39SPC1		EQU VIC+40SPC2		EQU VIC+41SPC3		EQU VIC+42SPC4		EQU VIC+43SPC5		EQU VIC+44SPC6		EQU VIC+45SPC7		EQU VIC+46NYBBLE		EQU &D800CIA1		EQU &DC00CIA2		EQU &DD00SPRITE0	EQU COL+&3F8SPRITE1	EQU SPRITE0+1SPRITE2	EQU SPRITE1+1SPRITE3	EQU SPRITE2+1SPRITE4	EQU SPRITE3+1SPRITE5	EQU SPRITE4+1SPRITE6	EQU SPRITE5+1SPRITE7	EQU SPRITE6+1NOPP	MACRO	DB &2C	; BIT xx xx	ENDMNMI	RTIIRQ	STA IRQTEMP	LDA #1	STA VICIFR	CLD	LDA #%00110011	STA VICCR1	STX IRQTEMP+1	STY IRQTEMP+2NOANY	JMP ACORN	;BIT,JMP	JSR IRQ2	LDA XCORD	STA X0	;TOP1	STA X1	;TOP2	STA X2	;BOT1	STA X3	;BOT2	LDA YCORD	STA Y0	;TOP1	STA Y1	;TOP2	CLC	ADC #21	STA Y2	;BOT1	STA Y3	;BOT2	LDA XCORD+1	STA X4	;UCKKO	STA X5	;HAND	LDA YCORD+1	STA Y4	STA Y5	LDA #0	STA MSB	LDY FRAME 	STA R6510	LDA POINTT1,Y	;TOP OF	STA SPRITE0	;HAND	LDA POINTT2,Y	STA SPRITE1	LDA POINTB1,Y	;BOTTOM	STA SPRITE2	;OF HAND	LDA POINTB2,Y	STA SPRITE3	LDA #%00110101	STA R6510	JSR SCROLS	LDA MUSIC	BPL SOON	LDY #&1C	LDA #0TNN	STA SID,Y	DEY	BPL TNN	JMP SOM2SOON	JSR &583F	; MUSICSOM2	LDA #%00111011	STA VICCR1	LDX IRQTEMP+1	LDY IRQTEMP+2ACORN	LDA #248	STA RASTER	LDA IRQTEMP+0	RTIIRQ2	LDA SYNC	; FIGHT TIMER	CLC	ADC #1	CMP #50	BCC WQS	LDA TIMER	BEQ ATZ	DEC TIMERATZ	LDA #0WQS	STA SYNC	LDA DRINK	BPL NODR	LDA TIMER2	; DRINK CONTEST	BNE DECT	; TIMER	LDA VDRUNK	CLC	ADC #1	CMP #9	BCS NODR    	STA VDRUNK	LDA ELAPSE	STA TIMER2DECT	DEC TIMER2NODR	JSR JOYSTICK	BIT MOVEICON	;MASTER	BPL NOMOVE	;CONTROL	LDA POINT	;IF ALREADY	BNE ALMOV	;POINTING	LDA FIRE	;IF NOT	BEQ OUTOFB	;CHECK	STA POINT	;1ALMOV	LDA NEXTONE	EOR #1	STA NEXTONE	CLC	ADC FRAME	CMP #9	BCC OKYA	LDA #0	STA POINTOKYA	STA FRAMENOMOVE	JMP LEAVA1OUTOFB	LDA XA		;MOVEHAND	CLC		;ABOUT	ADC RIGHT	;SCREEN	CMP #STEPX	BEQ RES1	STA XARES1	LDA XA	SEC	SBC LEFT	CMP #-STEPX	BEQ RES2	STA XARES2	LDA YA	SEC	SBC UP	CMP #-STEPY	BEQ RES3	STA YARES3	LDA YA	CLC	ADC DOWN	CMP #STEPY	BEQ RES4	STA YARES4	BIT MOVEICON	;IF NOT	BVS DRUNKN	;DRUNK	LDA LEFT	;MAKE HAND	ORA RIGHT	;STAY STILL	ORA UP		;IF NO	ORA DOWN	;JOYSTICK	BNE DRUNKN	;MOVEMENT	LDA NEXTONE	EOR #1	STA NEXTONE	LDA XA	BEQ YCHO	BPL DECI	INC XA	NOPPDECI	DEC XAYCHO	LDA YA	BEQ DRUNKN	BPL DECI2	CMP #-1	BNE SWE	LDA YCORD	AND #7	BNE DRUNKNSWE	INC YA	JMP DRUNKNDECI2	CMP #1	BNE SWE2	LDA YCORD	AND #7	BNE DRUNKNSWE2	DEC YADRUNKN	LDA XA	CLC	ADC XCORD	STA XCORD	CMP #118+16+8	BCC TOHAF	LDA #118+16+8	STA XCORD	LDA #-2	STA XATOHAF	CMP #36	BCS LEAVA	LDA #36	STA XCORD	LDA #2	STA XALEAVA	LDA YA	CLC	ADC YCORD	STA YCORD	CMP #&D3	BCC TOHAF1	LDA #&D3	STA YCORD	LDA #-2	JMP LEAATOHAF1	CMP #&4D	BCS LEAVA1	LDA #&4D	STA YCORD	LDA #2LEAA 	STA YALEAVA1	LDA OBJ25+1	BMI GOAW	LDA XCORD	NOPPGOAW	LDA #-12	CLC	ADC #12	CMP XCORD+1	BEQ HAMMY	BCS FRUIT	DEC XCORD+1	NOPPFRUIT	INC XCORD+1HAMMY	LDA OBJ25+1	; IS HE HERE ?	BMI GOAW2	LDA YCORD	NOPPGOAW2	LDA #255-28	CLC	ADC #28	CMP YCORD+1	BEQ HAMMY2	BCS FRUIT2	DEC YCORD+1	NOPPFRUIT2	INC YCORD+1HAMMY2	RTSMAIN	SEI	LDX #0	STX VICCR1REPLA2	LDA RASTER	CMP #60	BNE REPLA2	DEX	BNE REPLA2	CLD	LDX #255	TXS	LDA #%00100101	STA R6510	LDA #>NMI	STA &FFFA	LDA #<NMI	STA &FFFB	LDA #>NMI	;RESET	STA &FFFC	LDA #<NMI	;RESET	STA &FFFD	LDA #>IRQ	STA &FFFE	LDA #<IRQ	STA &FFFF	LDA #%10010100	;BANK2	STA CIA2	LDA #%01111000	;&DC00 SCR.	STA VICMCR	;B.M IN MID.	LDA #%11001000	STA VICCR2	LDA #%00111011	STA VICCR1	LDA #%10000000	;50th second	STA CIA1+14	;CLOCK MODE	STA CIA2+14	STA BORDER	LDA #1	STA VICIMR	LDA #&7F	STA CIA1+13	STA CIA2+13	LDA CIA1+13	LDA CIA2+13	LDA #248	STA RASTER	CLI	IF DEB=255	;DEBUG	LDA #160-24	;SCORE	STA X6	LDA #160+24	STA X7		LDA #252	STA Y6	STA Y7	FI	SEI	LDA #0	STA R6510	LDA #253	STA SPRITE6	LDA #254	STA SPRITE7	LDA #%00110101	STA R6510	CLI	LDA #12	STA SPC6	;COLOUR SPR6	STA SPC7	;COLOUR SPR7	LDA #%11000000	STA EXPANDX	STA EXPANDY		;SETUP SPRITE STUFF	LDA #1		;WHITE	STA SPC0	;SPR 0 COL	STA SPC2	;SPR 2 COL	STA SPC4	;SPR 4 COL		LDA #10		;RED BLOOD!	STA SPC1	;SPR 1 COL	STA SPC3	;SPR 3 COL	STA SPC5	;SPR 5 COL		LDA #%00000000	STA MULTICOL	STA PRIORITY	LDA #%11111111	STA ENABLE	LDA #50		;SLAINE X	STA XCORD	LDA #50+12	;UKKO X	STA XCORD+1	LDA #100	;SLAINE Y	STA YCORD	LDA #100+28	;UKKO Y	STA YCORD+1	SEI	LDA #0	STA R6510	LDA #100	;UKKO HAND	STA SPRITE4	LDA #101	;OVERLAYED	STA SPRITE5	LDA #%00110101	STA R6510	CLI	LDA #"M"	;M FOR MICHAEL	STA SEED+0	LDA #"J"	;J FOR JOSEPH	STA SEED+1	LDA #"A"	;A FOR ARCHER	STA SEED+2	LDY #(13*6)-1	; 13 X Y 6SETBR	JSR RAND	;BOX FADEING	STA BSEED-1,Y	;RANDOM	DEY		;NUMBERS	BNE SETBR	JSR JOYSTICK	;CLEAR VALUES	IF DEB=255	JSR DEBB	;BORDER VALUES	FI	RESTART LDX #255	;SET UP	TXS		;MAP AGAIN AND	JSR &60C4	;NO MUSIC	LDA #&4C	;STOP SCROLL	STA NOANY	LDA #&18	STA WARP+0	STA MAXW+0	LDA #0	STA WARP+1	STA MAXW+1	LDA #5		; 5 START	STA MONEY 	LDY #0	LDX #0OBJD	LDA ROMD,Y	;ROOM NUMBERS	STA OBJ1+1,X	LDA FLGD,Y	;FLAG DATA	STA OBJ1+3,X	INX	INX	INX	INX	INY	CPY #48	BCC OBJD	LDX #0	LDY #0SUCF	LDA STELOC,Y	STA ENEMYS,X	CMP #255	BEQ EOL	TXA	CLC	ADC #8	TAX	INY	BNE SUCFEOL	LDY #16		;OBJECTS ?????	LDA #255GRT	STA OPTNUM,Y	STA PICKED,Y	DEY    	BPL GRT	LDY #7		;LIST OF OPTS.	LDA #0		;IF SCROLLCLOCH	STA USED,Y	;BEING USED	STA ENEMYT,Y	;ATTACK	DEY		;0=NO	BPL CLOCH	STA POSITION	;Y SCROLLS POS	STA XA		;LEFT RIGHT	STA YA		;UP DOWN	STA POINT	;IF POINTING	STA NEXTONE	;0,1	STA FRAME	;POINT FRAME	STA HITUKO	;HIT UKKO	STA CIA1+8	STA CIA2+8	STA CIA1+9	; CIA1 USED	STA CIA2+9	; FOR WHEN	STA CIA1+10	; TIMEING	STA CIA2+10	; UKKO TO	STA CIA1+11	; COME BACK	STA CIA2+11	; CIA2 FOR	STA CIA1+15	; REAL TIME	STA CIA2+15	; OF DAY	STA TIMER	; VILLAGES	STA KILL	; TIMER	STA FIGHT	; MODE IF OPER.	STA YESB	; DO WHAT ON YES	STA NOB		; DO WHAT ON NO	STA EATTACK	; ENEMY ATTACK	STA DRINK	; DRINK CONTEST MODE	STA INTOX	; DRUNKEN ?	STA MAIN1	; GEM	STA MAIN2	STA MAIN3	STA MAIN4	STA MAIN5	STA R66+2	; LOCKED DOOR	STA R53+7	; NO GO	STA R78+2	; MOUND	LDA #8		; ARCH CLOSED	STA R53+10	LDA #2	STA STAKE	LDA #LOC	; 1 TO START	STA ROOM	STA OBJ25+1	;UKKO ASWELL	LDA #%10000000	;MOVE	STA MOVEICON	;NOT DRUNK	LDA #0	JSR &5700	;MUSIC SETUP	LDA #&2C	;ALL START	STA NOANY	;MOVEING	JSR FACE	;SLAINE FACE	LDX #>STARTM	;BY ME!	LDY #<STARTM	JSR WHATIW	LDX #T+4	;ARE YOU TEXT	JSR WINDOW	LDX #11		;YES	STX LIST+0		INX		;NO	STX LIST+1	LDA #255	STA LIST+2	LDA #0	STA LISTOFOREVER	LDA FRAME	; IF POINTING	CMP #4	BNE MEGACO	LDA XCORD+0	SEC	SBC #36-16	LSR A	LSR A	LSR A	TAX	LDA YCORD+0	SEC	SBC #&4D	; ? HOW MUCH	LSR A	LSR A	LSR A	STA WHATY	CLC	ADC #4	TAY		; 0 TO 16	JSR MEMXY	LDA #0	STA MIKE2	LDY #7COLSHN	LDA (MIKE1),Y	ORA MIKE2	STA MIKE2	DEY	BPL COLSHN	CMP #0	BEQ MEGACO	; MISSED IT	LDY WHATY	LDA PICKED,Y	CMP #255	BEQ MEGACO	STA WHATS	; WHAT SCROLL	JSR DELTH	LDA WHATS	CMP #100	BEQ LOAD	CMP #99	BEQ SAV	CMP #51	BCC NRR	SBC #50		; CHANGE TO	STA WHATO	; REAL OBJECT NO START AT 1	SBC #1		; -1	ASL A	ASL A	STA WHATP       LDY DOWHAT	LDA ITMTL,Y	STA SOMEWH+1	LDA ITMTH,Y	STA SOMEWH+2	JMP SOMEWHNRR	TAY		LDA JMPTL-1,Y	STA SOMEWH+1	LDA JMPTH-1,Y	STA SOMEWH+2SOMEWH	JSR &FFFF	; DESIRED OPTIONMEGACO LDA SYNCSMOOTH CMP SYNC	; IGNORE	BEQ SMOOTH	LDA SLOUGH	CMP #239	BEQ NTUFF	JMP TUFFNTUFF	JSR FACE	LDA #238	STA SLOUGH	LDX #T+85	JSR WINDOW	JSR BANJO	JMP AWSSAV	JMP SAVELOAD	JMP AWS	JSR FACE	JSR CLEARB	JSR FADEO	LDA &47F1	; STOP CLOCK	STA CIA2+11	LDA &47F2	STA CIA2+10	LDA &47F3	STA CIA2+9	SEI	LDY #2CE2	LDA &4800,Y	STA &00,Y	INY	BNE CE2	CLI	LDA #&49	STA SOR+2	LDA #0	STA SOR+1	LDA #<R1	STA DES+2	LDA #>R1	STA DES+1	JMP BLOCKCSAVE	LDA #&2C	STA LOAD	JSR FACE	JSR CLEARB	JSR FADEO	LDX #T+86	JSR WINDOW	LDA CIA2+11	; HOURS		STA &47F1	LDA CIA2+10	STA &47F2	LDA CIA2+9	STA &47F3	SEI	LDY #2CE	LDA &00,Y	STA &4800,Y		INY	BNE CE	CLI	LDA #&49	STA DES+2	LDA #<R1	STA SOR+2	LDA #0	STA DES+1	LDA #>R1	STA SOR+1BLOCKC	LDX #8	LDY #0SOR	LDA &FFFF,YDES	STA &FFFF,Y	INY	BNE SOR	INC SOR+2	INC DES+2	DEX	BNE SOR	LDA #0	STA CIA2+8	; RESTART TIMER	JSR OK	LDA ROOM	JSR ANDDE	JMP AWSTUFF	LDA KILL	BNE CMAY	LDA MAIN1	AND MAIN2	AND MAIN3	AND MAIN4	CMP #255	BNE CMAY	LDA ENEMYT+2	BNE CMAY	JSR FACE	LDX #T+78	JSR WINDOW	LDA #0	STA MAIN1	STA MAIN2	STA MAIN3	STA MAIN4	LDA #109	STA R53+7	LDA #9		; DOOR OPEN	STA R53+10CMAY	LDA FIGHT	; WHAT MODE	BEQ NFITM	; FIGHT MODE	JMP FITM	; DRINKING COMPETITIONNFITM	LDA DRINK	BEQ NOBOOZ	LDA VDRUNK	CMP #4	BNE NHALBODG	LDA #0		; SMC	BMI NHAL	LDA #255	STA BODG+1	LDX #T+56	JSR WINDOWNHAL	LDA VDRUNK	CMP #7	BNE NLASOBODG2	LDA #0	BMI NLASO	LDA #255	STA BODG2+1	LDX #T+57	JSR WINDOWNLASO	LDA VDRUNK	CMP #8	BEQ LOS	JMP AWSLOS 	JSR CLEARB	JSR FADEO	JSR FACE	LDX #T+55		JSR WINDOW	LDX #T+54	JSR WINDOW	JSR LOST	LDA #0 	STA DRINK	JSR OK	JMP AWS		; NORMAL MODENOBOOZ	LDA KILL	; ANY PEOPLE	BEQ NOWT	; TO KILL ?    	LDA TIMER	; ARE THEY GOING	BNE NOWT	; TO ATTACK	JSR ATTACK	; YOU FIRST	LDA #0		; CLEAR OUT	STA KILLNOWT	LDA ENEMYT+2	BNE OHW		LDA LIST+0	CMP #11		; YES NO MENU	BEQ OHW	CMP #10		; ALL IS LOST	BEQ OHW	LDA SEED	CMP #"M"		BNE OHW	LDA ROOM		STA VILLAG	JSR RAND	AND #7	CLC	ADC #1	STA VILLAG+2	LDX #T+89	JSR WINDOW	LDA ROOM 	JSR ANDDEOHW	LDA CIA2+11 	;2 HOURS ANYWAY	BIT CIA2+8	;SILLY TOD	CMP #2	BCC STT	LDA #0		;CLEAR HOURS	STA CIA2+11	;STOP CLOCK	JSR FACE	JSR CLEARB	JSR FADEO	LDX #T+22	JSR WINDOW	LDX #T+21	JSR WINDOWBANJO	LDA #13		; ALL IS LOST		STA LIST	LDA #255	STA LIST+1	LDA #0	STA LISTO 	JMP AWSSTT	LDA HITUKO	; IF NOT HIT	CMP #3	BNE AWS		; HIM LEAVE ALONE	LDA CIA1+10	CMP #1		; TIME DELAY	BCC AWS	LDA #0		; BRING	STA HITUKO	STA CIA1+11	; STOP CLOCK	STA CIA1+10	STA CIA1+9	; STOP CLOCK	JSR FACE	LDA ROOM	STA OBJ25+1	LDX #3	JSR WINDOW	LDX #T+16	; I AM BACK	JSR WINDOW	LDA LIST+0	; IF NOT ON	CMP #1	BNE AWS		; MAIN SELECT	LDA #7		; HIT UKKO	JSR GAIN	; AGAINAWS	IF DEB=255	JSR DEB	FI	JSR SET		; ANOTHER SCROLL ?	JMP FOREVER	; FIGHT MODEFITM	LDA TIMER	BEQ RESOE	JMP RESORESOE	LDA EATTACK	BEQ NOAT	JSR RAND	; TAKEIN A HIT	AND ENEMYT+4	SED	CLC	ADC #1	CLD		STA MIKE1	LSR A 	LSR A	LSR A	LSR A	ORA #"0"	STA DAM1+7	LDA MIKE1	AND #&F	ORA #"0"	STA DAM1+8	LDA MIKE1	JSR SUBW	BCC ALIV	LDA ROOM		STA OBJ25+1	JSR CLEARB	JSR FADEO	JSR FACE	LDX #16	JSR WINDOW	LDX #T+44	JSR WINDOW	LDX #T+45	JSR WINDOW	LDA #&15		JSR ADT	LDA #238	; YOU GOT KILLED	JSR KNOCK	LDA MAXW+1	STA WARP+1	LDA MAXW+0	STA WARP+0	JMP AWSALIV	JSR UPDATEALIVE	LDX #>E4	LDY #<E4	JSR WHATIW	LDA #42		; NO DUCK	JSR LOOSE	LDA #47		; NO DEFEND	JSR LOOSE	LDA #48		; NO DODGE	JSR LOOSE	LDA #0	STA EATTACK	LDA #4	STA TIMER	JMP RESONOAT	JSR RAND	AND #3	BEQ AT1	CMP #1	BEQ AT1	CMP #2	BEQ AT2	LDX #>E3	LDY #<E3	LDA #3	JMP FIGRAT2	LDX #>E2	LDY #<E2	LDA #2	JMP FIGRAT1	LDX #>E1	LDY #<E1	LDA #1FIGR	STA ATYPE	; ATTACK TYPE	JSR WHATIW	LDA ENEMYT+7	STA TIMER	LDA #255	STA EATTACKRESO	LDA WARP+1	CMP MAXW+1		BNE NOWARP		LDA WARP+0	CMP MAXW+0	BNE NOWARP	LDA #40	JSR GAIN	JMP PLASNOWARP	LDA #40	JSR LOOSEPLAS	LDA AXE		; IF NOT GOT AXE	BEQ SHW		; REMOVE FROM LIST	LDA #44		; SWING	JSR LOOSE	LDA #47		; DEFEND	JSR LOOSE 	LDA #49		; THROW	JSR LOOSE	JMP NOCDSHW	LDA #44		; SWING	JSR GAIN	LDA #47		; DEFEND	JSR GAIN	LDA #49		; THROW	JSR GAINNOCD	LDA EATTACK	BPL NOATK	LDA #42		; DUCK	JSR GAIN	LDA #48		; DODGE	JSR GAIN	LDA AXE		; IF GOT AXE	BNE NOATK	; THEN CAN	LDA #47		; DEFEND	JSR GAINNOATK	JMP AWSUPDATE	JSR WRR		; REPLOT	JSR FBOX	; VALUES	JSR HOMV	; INTO	JSR FBOX	; WINDOWS	JSR ENNW	JMP FBOX	IF DEB=255DEBB	LDA CIA2+9	LDX CIA2+10	LDY CIA2+11	BIT CIA2+8 	JMP VALUES	FI